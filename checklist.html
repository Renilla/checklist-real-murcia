<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Checklist Cromos Real Murcia</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #800000;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .title-icon {
      width: 50px;
      height: 65px;
      vertical-align: middle;
    }
    .global-progress {
      display: inline-block;
      vertical-align: middle;
      margin-left: 15px;
    }
    .collection {
      background: #fff;
      margin: 15px 0;
      border-radius: 5px;
      overflow: hidden;
    }
    .collection-header {
      padding: 10px 15px;
      font-weight: bold;
      font-size: 1.5em;
      color: #800000;
      cursor: pointer;
      background: #e0e0e0;
      display: flex;
      align-items: center;
    }
    .progress-circle {
      width: 50px;
      height: 50px;
      flex-shrink: 0;
    }
    .collection-image {
      width: 60px;
      height: 80px;
      object-fit: cover;
      border-radius: 4px;
      margin: 0 10px;
      flex-shrink: 0;
    }
    .collection-title {
      flex: 1;
      text-align: center;
    }
    .collection-body {
      display: none;
      padding: 10px 15px;
      background: #fafafa;
    }
    .collection-body ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .collection-body li {
      margin: 8px 0;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ddd;
      background: #fff;
      transition: background 0.2s ease, color 0.2s ease;
      cursor: pointer;
      user-select: none;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .collection-body li.checked {
      background: #e0e0e0;
      color: #555;
      text-decoration: line-through;
    }
    .collection-body input[type="checkbox"] {
      display: none;
    }
    .arrow {
      transition: transform 0.3s ease;
      margin-left: 10px;
    }
    .arrow.open {
      transform: rotate(90deg);
    }
  </style>
</head>
<body>
  <h1>
    <img src="imagesCromos/icono-principal.jpg" alt="Icono" class="title-icon">
    Checklist Cromos Real Murcia
    <div class="global-progress" id="global-progress-svg"></div>
  </h1>

  <div id="collections"></div>

  <script>
    const colecciones = {
      "Liga Este 1973/74": {
        cromos: ["Ojeda", "Ponce", "José", "Lorenzo", "Ruiz Abellán", "Canito", "Herrero", "Chinchurreta", "Abel Pérez",
        "Sergio", "Murciano", "Casco", "Juárez", "Cristo", "García Soriano", "Vera Palmes"],
        portada: "imagesAlbumes/ligaeste1973-74.png"
      },
      "Campeonato de Liga 1973-1974": {
        cromos: ["Real Murcia Equipos/Escudos/Banderas", "La Condomina", "Ojeda", "Ponce", "José", "Canito", "Abel Pérez",
        "Lorenzo", "Herrero", "Sergio", "García Soriano", "Chinchurreta", "Murciano", "Vera Palmes", "Juárez", "Casco",
        "López", "Cristo", "Taverna Fichajes de Última Hora"],
        portada: "imagesAlbumes/campeonatoLiga1973-74.png"
      },
      "Liga Este 1974/75": {
        cromos: ["Ojeda", "Canito", "José", "Laredo", "Abel Pérez", "Ponce", "Lema", "Verza", "Herrero",
        "Ruiz Abellán", "Vera Palmes", "Pazos", "Murciano", "Taverna", "Etchecopar", "García Soriano",
        "Casco", "Juárez", "Cristo"],
        portada: "imagesAlbumes/ligaeste1974-75.png"
      },
      "Liga Este 1980/81": {
        cromos: ["Echevarría", "Cuenca", "Picazo", "Campello", "Chazarreta", "Sebastiá", "Capa", "Vidaña", "Ruiz",
        "Naharro", "Camino", "Sebas", "García Murcia", "Amorós", "Abad", "Sotelo", "García Fernández", "Alabanda",
        "Albiol", "Salamanca"],
        portada: "imagesAlbumes/ligaeste1980-81.png"
      },
      "Liga Este 1983/84": {
        cromos: ["Alineación Real Murcia", "Entrenador Eusebio Ríos", "Cervantes", "Juan José", "Vidaña", "Sierra", "Campello", "Higinio", "Núñez II",
        "Del Barrio", "López", "Guina", "Sebas", "Núñez I", "Moyano", "Figueroa", "Abad", "Pelegrín", "Salamanca", "Moya",
        "Albaladejo", "Ferrer", "Tarrés", "Herrero", "Mora", "Santi", "Ramírez", "Segundo"],
        portada: "imagesAlbumes/ligaeste1983-84.png"
      },
      "Liga Este 1984/85": {
        cromos: ["Alineación Real Murcia", "Entrenador Eusebio Ríos", "Cervantes", "Mora", "Sierra", "Núñez II", "Higinio", 
        "Albaladejo", "Vidaña", "Sebas", "Guina", "López", "Del Barrio", "Santi", "Tarrés", "Ramírez", "Moyano",
        "Pelegrín", "Figueroa", "Husillos", "Víctor Último Fichaje"],
        portada: "imagesAlbumes/ligaeste1984-85.png"
      },
      "Liga Este 1986/87": {
        cromos: ["Alineación Real Murcia", "Entrenador Vicente Campillo", "Amador", "Núñez", "Brasi", "Vidaña", "Juanjo",
        "Pérez García", "Sánchez", "Del Barrio", "Timoumi", "Guina", "Manolo", "Mejías II", "Moyano", "Moya", "Adolfo",
        "Campello", "Delgado", "Ferrer", "Figueroa", "Martín", "Parra Últimos Fichajes", "J. V. Sánchez Últimos Fichajes",
        "Tendillo Últimos Fichajes", "Carlos Últimos Fichajes", "Vergara Últimos Fichajes"],
        portada: "imagesAlbumes/ligaeste1986-87.png"
      },
      "Liga Este 1987/88": {
        cromos: ["Escudo", "Entrenador Antonio Benítez", "Alineación", "Amador", "Vergara", "Núñez", "Juanjo", "Pérez García",
        "Vicente Sánchez", "Miguel Sánchez", "Parra", "Herrero", "Ibeas", "Manolo", "Botella", "Eugenio", "Mejías", "Diego",
        "Reces", "Mesa", "Costa Últimos Fichajes", "Brown Últimos Fichajes"],
        portada: "imagesAlbumes/ligaeste1987-88.png"
      },
      "Liga Este 1988/89": {
        cromos: ["Escudo", "Entrenador Antal Dunai", "Amador", "Vergara", "Núñez", "Juanjo", "Pérez García",
        "Tente Sánchez", "Paco Sánchez", "Costa", "Brown", "Ibeas", "Parra", "Javi Rey", "Miguel Sánchez",
        "Herrero", "Mejías I", "Cordero", "Mejías II", "Ruda", "Botella", "Eugenio", "Luis Carlos", "Korac", 
        "Manolo", "Molina", "Clos"],
        portada: "imagesAlbumes/ligaeste1988-89.png"
      },
      "Las Fichas de la Liga 2001": {
        cromos: ["Escudo Murcia"],
        portada: "imagesAlbumes/fichasLiga2001.png"
      },
      "Las Fichas de la Liga 2002": {
        cromos: ["Escudo Murcia"],
        portada: "imagesAlbumes/fichasLiga2002.png"
      },
      "Las Fichas de la Liga 2003": {
        cromos: ["Escudo Murcia"],
        portada: "imagesAlbumes/fichasLiga2003.png"
      },
      "Liga Este 2003/04": {
        cromos: ["Escudo", "Entrenador Joaquín Peiro", "Valero", "Maciel", "Pedro Largo", "Cuadrado", "Carrero", 
        "Clavero", "Juanma", "Acciari", "Julio Álvarez", "Albiol", "Setvalls", "Gomez", "Isach", "Richi",
        "David Karanka", "Luis García", "Quintana", "Sánchez Broto", "Míchel", "Fredi", "Roberto", "Loeschbor", 
        "Carreras", "Roteta", "Esnaider", "Juanmi", "Jensen", "Alineación Murcia La Razón", "Cuadrado Nutella"],
        portada: "imagesAlbumes/ligaeste2003-04.png"
      },
      "Megafichas Liga 2003/04": {
        cromos: ["Escudo Murcia", "Valero", "Sánchez Broto", "Maciel", "Carrero", "Pedro Largo", "Cuadrado", "Clavero",
        "Lasa", "Roteta", "Jaime", "Carreras", "Acciari", "Tito", "Roberto", "Juanma", "Albiol", "Fredi", "Setvalls",
        "Isach", "Jensen", "Richi", "David Karanka", "Luis García", "Míchel", "Juanmi", "Esnaider"],
        portada: "imagesAlbumes/megafichas2003-04.png"
      },
      "Las Fichas de la Liga 2004": {
        cromos: ["Escudo", "Estadio", "Entrenador Joaquín Peiro", "Juanmi", "Sánchez Broto", "Maciel", "Juanma",
        "Pedro Largo", "Cuadrado", "Roteta", "Carrero", "Loeschbor", "Clavero", "Jensen", "Acciari", "Carreras",
        "Fredi", "Roberto", "Quintana", "Míchel", "Luis García", "David Karanka", "Richi", "Índice",
        "Maciel El Mejor 2003", "Míchel Crack", "Juanma Capitán", "Jensen Welcome", "Juanmi X Edición", 
        "Setvalls", "Isach", "Julio Álvarez", "Esnaider", "Plantilla Murcia", "Bonano", "Gancedo", "I. Hurtado",
        "Juarez", "Toshack"],
        portada: "imagesAlbumes/fichasLiga2004.png"
      },
      "Megacracks 2004/05": {
        cromos: ["Escudo Real Murcia", "Acciari"],
        portada: "imagesAlbumes/megacracks2004-05.png"
      },
      "Las Fichas de la Liga 2005": {
        cromos: ["Escudo Murcia", "Índice Murcia", "Juanmi", "Juanma", "Maciel", "Sietes", "Valera", "Cuadrado",
        "Carrera", "Acciari", "Medina", "Michel", "Pulido", "Munteanu", "Julio Álvarez", "Richi", "David Karanka",
        "Iván Alonso"],
        portada: "imagesAlbumes/fichasLiga2005.png"
      },
      "Megacracks 2005/06": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/megacracks2005-06.png"
      },
      "Las Fichas de la Liga 2006": {
        cromos: ["Escudo Murcia", "Índice", "Juanmi", "Corona", "Cuadrado", "Juanma", "Pignol", "Acciari", "Carrera",
        "Julio Álvarez", "Michel", "Pedro León", "Pulido", "Samuel", "P. Sierra", "D. Alonso", "Iván Alonso", "M. Kreuz",
        "Richi"],
        portada: "imagesAlbumes/fichasLiga2006.png"
      },
      "Megacracks 2006/07": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/megacracks2006-07.png"
      },
      "Las Fichas de la Liga 2007": {
        cromos: ["Escudo Murcia", "Plantilla Murcia", "Notario", "Juanma", "Marañón", "Ochoa", "Paco Peña", "Cuadrado",
        "Ramón", "Pignol", "Abel", "Pablo Ruiz", "Samuel", "Jofre", "Pedro León", "Iván Alonso", "Aranda", "Antoñito",
        "Tato", "Richi", "Gallardo", "A. Martín"],
        portada: "imagesAlbumes/fichasLiga2007.png"
      },
      "Liga Este 2007/08": {
        cromos: ["Escudo", "Entrenador Lucas Alcaraz", "Notario", "Carini", "Pignol", "Cuadrado", "Ochoa", 
        "César Arzo", "Paco Peña", "Marañón", "Abel", "Bruno", "Pablo García", "Richi", "Pedro León", "Gallardo",
        "De Lucas", "Jofre", "Regueiro", "Iván Alonso", "Iñigo Vélez", "Henok Goitom", "Mejía", "Curro Torres", 
        "Baiano", "Movilla", "De Coz", "Kabous", "Rosinei"],
        portada: "imagesAlbumes/ligaeste2007-08.png"
      },
      "Megacracks 2007/08": {
        cromos: ["Escudo", "Notario", "Carini", "Pignol", "Cuadrado", "Ochoa", "César Arzo", "Paco Peña", "Marañón",
        "Curro Torres", "Abel", "Pablo García", "De Lucas", "Richi", "Pedro León", "Regueiro", "Gallardo", "Jofre",
        "Iñigo Vélez", "Henok Goitom", "Iván Alonso", "Mejía", "Baiano", "Movilla"],
        portada: "imagesAlbumes/megacracks2007-08.png"
      },
      "Ediciones Estadio Liga 2007/08": {
        cromos: ["Escudo", "Entrenador Lucas Alcaraz", "Notario", "Carini", "Pignol", "Cuadrado", "Ochoa", "Paco Peña",
        "Marañón", "César Arzo", "Richi", "De Lucas", "Regueiro", "Bruno", "Pedro León", "Gallardo", "Jofre", "Iván Alonso",
        "Henok Goitom", "Mejía", "Baiano"],
        portada: "imagesAlbumes/estadio2007-08.png"
      },
      "Las Fichas de la Liga 2008": {
        cromos: ["Escudo", "Plantilla", "Himno", "Entrenador Lucas Alcaraz", "Notario", "Carini", "Pignol", "Marañón",
        "Cuadrado", "Ochoa", "Paco Peña", "César Arzo", "Mejía", "Abel", "Pablo García", "Bruno", "De Lucas", "Richi",
        "Gallardo", "Baiano", "Jofre", "Iván Alonso", "Henok Goitom", "Iñigo Vélez", "Iban Cuadrado El Capitán Horizontal/Security Horizontal/Security Vertical/Vertical",
        "Notario El Crack Horizontal/Security Horizontal/Security Vertical/Vertical", "Iván Alonso El Mejor Horizontal/Security Horizontal/Security Vertical/Vertical",
        "Curro Torres", "Regueiro", "Movilla", "Notario TOP Platinum/Brillantes/Security Horizontal/Security Vertical",
        "Paco Peña TOP Platinum/Brillantes/Security Horizontal/Security Vertical", "Regueiro TOP Platinum/Brillantes/Security Horizontal/Security Vertical",
        "De Coz", "Rosinei", "Aquino"],
        portada: "imagesAlbumes/fichasLiga2008.png"
      },
      "Panini Play Liga 2007/08": {
        cromos: ["Notario", "Curro Torres", "Mejía", "César Arzo", "Pablo García", "Movilla", "De Lucas", "Regueiro",
        "Henok Goitom", "Baiano", "Iván Alonso"],
        portada: "imagesAlbumes/playLiga2007-08.png"
      },
      "Liga Este 2008/09": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2008-09.png"
      },
      "Megacracks 2008/09": {
        cromos: ["Escudo Real Murcia", "Iván Alonso"],
        portada: "imagesAlbumes/megacracks2008-09.png"
      },
      "Las Fichas de la Liga 2009": {
        cromos: ["Escudo Murcia", "Plantilla Murcia", "Alberto", "Paco Peña", "Lillo", "Ochoa", "De Coz", "Mejía", "Cuellar",
        "Guerrero", "Núñez", "Bruno", "Dialiba", "Capdevila", "De Lucas", "Aquino", "Despotovic", "Iván Alonso", "Sikora",
        "Elia", "Marañón", "Movilla", "Montoro"],
        portada: "imagesAlbumes/fichasLiga2009.png"
      },
      "Liga Este 2009/10": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2009-10.png"
      },
      "Las Fichas de la Liga 2010": {
        cromos: ["Escudo Murcia", "Nueva Condomina", "Campos", "Elía", "Óscar Sánchez", "Ochoa", "Sergio Fernández", "De Coz",
        "Iñaki Bea", "Bruno", "Albiol", "Luque", "Pereyra", "Mario Rosas", "Capdevila", "Isaac Jové", "Pedro", "Natalio", "Kike",
        "Índice", "Sergio Fernández Superstar", "Aquino", "Mejía", "Alberto Cifuentes", "Pico", "Sergio", "Aguilera", "José González",
        "Chando"],
        portada: "imagesAlbumes/fichasLiga2010.png"
      },
      "Liga Este 2011/12": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2011-12.png"
      },
      "Las Fichas de la Liga 2012": {
        cromos: ["Escudo Murcia", "Nueva Condomina", "Iñaki Alonso", "Alberto", "Mario Marín", "Molinero", "Oriol", "Iván Amaya",
        "Jorge", "Óscar Sánchez", "Aguilera", "Cerrajería", "Iturra", "Emilio Sánchez", "Richi", "Isaac", "Sutil", "Kike", "Índice",
        "Iturra Superstar", "Sutil Superstar", "Nico", "Pedro", "Borja", "Chando", "Ruso"],
        portada: "imagesAlbumes/fichasLiga2012.png"
      },
      "Liga Este 2012/13": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2012-13.png"
      },
      "Las Fichas de la Liga 2013": {
        cromos: ["Escudo Murcia", "Nueva Condomina", "Gustavo Siviero", "Javi Jiménez", "Molinero", "Tagliafico", "Mauro Dos Santos",
        "Óscar Sánchez", "Matilla", "Emilio Sánchez", "Nico Martínez", "Nafti", "Jonathan", "Sutil", "Cristian", "Índice", "Tagliafico Superstar",
        "Cristian García Superstar", "Acciari", "Higinio", "Onésimo", "Eddy Silvestre", "Kike García", "Saúl Berjón", "Pifarré", "Catalá"],
        portada: "imagesAlbumes/fichasLiga2013.png"
      },
      "Liga Este 2013/14": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2013-14.png"
      },
      "Las Fichas de la Liga 2014": {
        cromos: ["Escudo Real Murcia", "Nueva Condomina", "Julio Velázquez", "Casto", "Molinero", "Mauro", "Albiol", "Acciari",
        "Malonga", "Dorca", "Toribio", "Iván Moreno", "Tete", "Wellington Silva", "Kike", "Índice", "Acciari Superstar", "Kike Superstar",
        "Truyols", "Óscar Sánchez", "Saúl Berjón", "Fernando", "Álex Martínez", "Alcalá", "Dani Bautista"],
        portada: "imagesAlbumes/fichasLiga2014.png"
      },
      "Liga Este 2014/15": {
        cromos: ["Escudo Real Murcia"],
        portada: "imagesAlbumes/ligaeste2014-15.png"
      }
    };

    const contenedor = document.getElementById('collections');
    const globalProgressContainer = document.getElementById('global-progress-svg');
    const progresoGuardado = JSON.parse(localStorage.getItem('checklistMurciaColecciones')) || {};

    function calcularPorcentaje(nombreColeccion) {
      const total = colecciones[nombreColeccion].cromos.length;
      const marcados = Object.values(progresoGuardado[nombreColeccion] || {}).filter(v => v).length;
      return (marcados / total) * 100;
    }

    function calcularPorcentajeGlobal() {
      let total = 0, marcados = 0;
      Object.keys(colecciones).forEach(nombre => {
        total += colecciones[nombre].cromos.length;
        marcados += Object.values(progresoGuardado[nombre] || {}).filter(v => v).length;
      });
      return total ? (marcados / total) * 100 : 0;
    }

    function crearSVGPorcentaje(porcentaje, tamaño = 50) {
      const radius = tamaño/2 - 2;
      const circumference = 2 * Math.PI * radius;
      const offset = circumference - (porcentaje / 100) * circumference;

      return `
        <svg class="progress-circle" width="${tamaño}" height="${tamaño}">
          <circle cx="${tamaño/2}" cy="${tamaño/2}" r="${radius}" stroke="#ccc" stroke-width="4" fill="none"/>
          <circle cx="${tamaño/2}" cy="${tamaño/2}" r="${radius}" stroke="#800000" stroke-width="4" fill="none"
            stroke-dasharray="${circumference}" stroke-dashoffset="${offset}" transform="rotate(-90 ${tamaño/2} ${tamaño/2})" />
          <text x="50%" y="50%" text-anchor="middle" dy=".3em" font-size="15" fill="#800000">${Math.round(porcentaje)}%</text>
        </svg>
      `;
    }

    function actualizarProgresoGlobal() {
      globalProgressContainer.innerHTML = crearSVGPorcentaje(calcularPorcentajeGlobal(), 50);
    }

    // Numeración global
    let globalIndex = 1;

    Object.keys(colecciones).forEach(nombreColeccion => {
      const data = colecciones[nombreColeccion];
      const collectionDiv = document.createElement('div');
      collectionDiv.className = 'collection';

      const porcentaje = calcularPorcentaje(nombreColeccion);
      const header = document.createElement('div');
      header.className = 'collection-header';
      header.innerHTML = `
        <span class="progress-svg">${crearSVGPorcentaje(porcentaje)}</span>
        <img class="collection-image" src="${data.portada}" alt="${nombreColeccion}">
        <span class="collection-title">${nombreColeccion}</span>
        <span class="arrow">▶</span>
      `;
      const svgContainer = header.querySelector('.progress-svg');

      const body = document.createElement('div');
      body.className = 'collection-body';
      const ul = document.createElement('ul');

      data.cromos.forEach((cromo, index) => {
        const li = document.createElement('li');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.checked = progresoGuardado[nombreColeccion]?.[index] || false;

        if (checkbox.checked) li.classList.add('checked');

        li.addEventListener('click', () => {
          checkbox.checked = !checkbox.checked;
          if (!progresoGuardado[nombreColeccion]) {
            progresoGuardado[nombreColeccion] = {};
          }
          progresoGuardado[nombreColeccion][index] = checkbox.checked;
          localStorage.setItem('checklistMurciaColecciones', JSON.stringify(progresoGuardado));

          li.classList.toggle('checked', checkbox.checked);
          svgContainer.innerHTML = crearSVGPorcentaje(calcularPorcentaje(nombreColeccion));
          actualizarProgresoGlobal();
        });

        li.appendChild(checkbox);
        const span = document.createElement('span');
        span.textContent = `${globalIndex++}. ${cromo}`;
        span.style.fontWeight = 'bold';
        li.appendChild(span);
        ul.appendChild(li);
      });

      body.appendChild(ul);

      header.addEventListener('click', () => {
        const arrow = header.querySelector('.arrow');
        body.style.display = body.style.display === 'block' ? 'none' : 'block';
        arrow.classList.toggle('open');
      });

      collectionDiv.appendChild(header);
      collectionDiv.appendChild(body);
      contenedor.appendChild(collectionDiv);
    });

    actualizarProgresoGlobal();
  </script>
</body>
</html>
